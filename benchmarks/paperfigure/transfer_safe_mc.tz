parameter (pair address mutez);
storage (pair (map address mutez) mutez);
code {
  UNPAIR; UNPAIR; DIP 2 { UNPAIR };
  DUP 3; SENDER; GET; IF_NONE { FAIL } {};
  DUP 3; DUP 2; COMPARE; GE; IF {} { FAIL };
  DIP { DIG 2; DUP 3 }; SUB; SOME; SENDER; UPDATE;
  DUP; DUP 3; GET; IF_NONE { PUSH mutez 0 } {};
  DIP { DIG 2 }; ADD;
  #__MICSE_CHECK { DIP {DROP; DROP }; COMPARE; LE };
  SOME; DIG 2; UPDATE;
  PAIR; NIL operation; PAIR }